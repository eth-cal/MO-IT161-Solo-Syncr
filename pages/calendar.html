<html>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/styles/common.css"/>
    <link rel="stylesheet" href="/styles/calendar.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Archivo"/>

    <body>
        <div id="embed_top_div" class="c_wh-100p">
            <div class="mv_topbar">
                <div class="title">
                    Calendar
                </div>
                <div id="mv.edit.topbar" class="opts c_flex_list c_flex_h c_b-rack_pr-light">
                    <button class="c_button entry">
                        <i class="bi bi-funnel"></i>Filters
                    </button>
                    <button class="c_button entry">
                        <i class="bi bi-eye"></i>Visibility
                    </button>
                </div>
            </div>
            <div id="main-view-content" class="c_flex_main">
                <div id="cl.date">
                    &lt;DD&gt; &lt;month&gt;, &lt;YYYY&gt;
                </div>
                <div id="cl.grid-view">
                    <div id="cl.grid-view.row">
                        <div id="cl.task-entry-box" class="cal_box">
                            <span class="day_number">&lt;day num&gt;</span>
                            <span></span> <!-- Force the task_list to be at the bottom by taking the remaining space. -->
                            <div class="c_flex_lay gapped c_flex_v task_list">
                                <button class="c_button entry">Calendar</button>
                                <button class="c_button entry"><i class="bi bi-clock"></i>Alarm</button>
                                <button class="c_button entry"><i class="bi bi-kanban"></i>Kanban</button>
                                <button class="c_button entry cent"><i class="bi bi-chevron-down"></i><span>&lt;n&gt; more</span></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="cl.grid-view.ctrl" class="c_flex_list c_flex_h" style="
            position: fixed;

            height: 50px;

            bottom: 0;
            right: 0;
        ">
            <div id="cl.grid-view.ctrl.opts" class="c_flex_list compact c_flex_h">
                <button class="c_button square with-icon">
                    <i class="bi bi-eye"></i>
                </button>
                <button class="c_button square with-icon">
                    <i class="bi bi-calendar"></i>
                </button>
                <button class="c_button square with-icon">
                    <i class="bi bi-clock"></i>
                </button>
                <button class="c_button square with-icon">
                    <i class="bi bi-trash"></i>
                </button>
            </div>
            
            <button id="cl.grid-view.ctrl.add-task" class="c_button square with-icon">
                <i class="bi bi-plus-lg"></i>
            </button>
        </div>

        <!-- TODO: Remove this code. For static presentation only. -->
        <script type="text/javascript">
            /** @type {HTMLElement} */
            let gridRows = document.getElementById("cl.grid-view");
            /** @type {HTMLElement} */
            let calendarBox = document.getElementById("first box for presentation").cloneNode(true);
            

            calendarBox.removeAttribute("id");
            /** @type {HTMLElement} */
            let calendarBoxNumber = calendarBox.cloneNode(true); {
                for (let idx = calendarBox.children.length; idx > 0; idx--) {
                    let elem = calendarBox.children.item(idx);
                    console.log(elem);
                    if (elem == null || elem.classList.contains("day_number")) {continue;}
                    elem.remove();
                }
            }

            let day = 1;

            for (let row of gridRows.children) {
                let calendarBoxRow = new Set(); {
                    for (let id = 1; id <= 7; id++) {
                        if (day > 31) {
                            break;
                        }

                        let placeTasks = Math.random() > 0.5;
                        let element;

                        if (placeTasks) {element = calendarBox.cloneNode(true);}
                        else {element = calendarBoxNumber.cloneNode(true);}

                        element.children.item(0).textContent = day;
                        day++
                        calendarBoxRow.add(element);
                    }
                }
                
                row.replaceChildren(...calendarBoxRow);
            }
        </script>
    </body>
</html>