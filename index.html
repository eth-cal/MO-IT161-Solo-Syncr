<!-- BIG TODO: With consistency and proper classification of
common attributes, move the inner styles of all documents to
the common.css (or if you think the style is likely unique to
an element, i.e. no other page or its elements can use it, put
it inside a specialised CSS file). Would recommend that those
changes are done in a dedicated branch. -->

<html>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="styles/common.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Archivo"/>
    
    <header>
        <title>???</title>
    </header>
    
    <body>
        <div class="c_flex_lay c_flex_h">
            <div class="left-sidebar side-shade">
                <div class="mode-list">
                    <img src="https://placehold.co/128?font=noto-sans" width="100%"/>
                    <hr class="common">
                    <div id="lsb.button-rack" class="c_flex_list c_flex_v c_pr-light">
                        <button id="lsb.button-rack.dashboard" class="c_button with-icon">
                            <i class="bi bi-pie-chart" style="font-size: 16pt;"></i>
                        </button>
                        <button id="lsb.button-rack.timeline" class="c_button with-icon">
                            <i class="bi bi-bar-chart-steps" style="font-size: 16pt;"></i>
                        </button>
                        <button id="lsb.button-rack.calendar" class="c_button with-icon">
                            <i class="bi bi-calendar" style="font-size: 16pt;"></i>
                        </button>
                        <button id="lsb.button-rack.alarms" class="c_button with-icon">
                            <i class="bi bi-alarm" style="font-size: 16pt;"></i>
                        </button>
                        <button id="lsb.button-rack.kanban" class="c_button with-icon">
                            <i class="bi bi-kanban" style="font-size: 16pt;"></i>
                        </button>
                    </div>
                </div>
                <div class="misc-ftr">
                    <div class="c_flex_list c_flex_v">
                        <button class="c_button">Guide</button>
                        <button class="c_button">About</button>
                    </div>
                </div>
            </div>

            <div class="planner-select c_flex_lay c_flex_v side-shade">
                <div class="active-header c_flex_lay c_flex_v">
                    <span id="lsb.plan-sel.active.title">No planner</span><br/>
                    <span id="lsb.plan-sel.active.desc">...</span>
                    <hr class="common">
                </div>
            </div>

            <div class="main-view">
                <embed id="mv.view" type="text/html" src="">
            </div>

            <script type="text/javascript">
                /** @type {Map<string, string>} */
                const pages = new Map();
                pages.set("lsb.button-rack.dashboard", "experiment.html");
                pages.set("lsb.button-rack.timeline", "/pages/timeline.html");

                let mainViewPane = document.getElementById("mv.view");
                let currentView = "pages/timeline.html";

                function mv_page_navTo(htmlFile, force) {
                    // TODO: find some better alternative to matching file paths.
                    if (!force && currentView == htmlFile) {
                        return;
                    } else {
                        mainViewPane.setAttribute("src", htmlFile);
                        currentView = htmlFile;
                    }
                }
 
                for (const lsbButton of document.getElementById("lsb.button-rack").children) {
                    /** @type {string} */
                    let htmlId = lsbButton.getAttribute("id") || "";
                    let htmlTargetSource = "";
                    
                    if (pages.has(htmlId)) {
                        htmlTargetSource = pages.get(htmlId);
                    }

                    console.log("Id:", htmlId, "| Source:", htmlTargetSource);

                    lsbButton.onclick = function() {
                        console.log("GOTO:", htmlTargetSource);
                        mv_page_navTo(htmlTargetSource);
                    }
                }

                mv_page_navTo(currentView, true);
            </script>
        </div>
    </body>
</html>